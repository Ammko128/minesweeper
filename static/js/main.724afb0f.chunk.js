(this["webpackJsonpminesweeper-js"]=this["webpackJsonpminesweeper-js"]||[]).push([[0],{13:function(e,t,s){},14:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),n=s(7),r=s.n(n),l=(s(13),s(1)),o=s(2),m=s(3),h=s(4),c=(s(6),function(e){Object(h.a)(s,e);var t=Object(m.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={buttons:[],fields:[],marked:0,time:0},e}return Object(o.a)(s,[{key:"restartClasses",value:function(){for(var e=document.getElementsByClassName("marked");e[0];)e[0].classList.remove("marked");for(e=document.getElementsByClassName("revealed");e[0];)e[0].classList.remove("revealed");for(e=document.getElementsByClassName("revealed-bomb");e[0];)e[0].classList.remove("revealed-bomb");for(e=document.getElementsByClassName("clicked-bomb");e[0];)e[0].classList.remove("clicked-bomb");for(var t=0;t<9;t++)for(e=document.getElementsByClassName("bombs"+t);e[0];)e[0].classList.remove("bombs"+t)}},{key:"renderButtons",value:function(){for(var e=[],t=0;t<this.props.sizeY;t++){e[t]=[];for(var s=0;s<this.props.sizeX;s++)e[t][s]=i.a.createElement("div",{className:"field",onContextMenu:function(e){return e.preventDefault()},onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,id:t+"-"+s,key:t+"-"+s})}this.setState({buttons:e})}},{key:"setFields",value:function(){for(var e=this,t=[],s=[],a=0,i=0,n=0;n<this.props.bombs;n++){for(var r=!1;!r;){r=!0,a=this.getRandomInt(this.props.sizeX),i=this.getRandomInt(this.props.sizeY);for(var l=0;l<s.length;l++)if(s[l][0]===a&&s[l][1]===i||0===a&&(0===i||i===this.props.sizeY-1)||a===this.props.sizeX-1&&(0===i||i===this.props.sizeY-1)){r=!1;break}}s[n]=[a,i]}for(n=0;n<this.props.sizeX;n++)for(t[n]=[],l=0;l<this.props.sizeY;l++){t[n][l]=0;for(var o=0;o<s.length;o++)if(n-s[o][0]<=1&&n-s[o][0]>=-1&&l-s[o][1]<=1&&l-s[o][1]>=-1&&(t[n][l]+=1),n===s[o][0]&&l===s[o][1]){t[n][l]="X";break}}this.setState({fields:t});var m=0;return this.setState({interval:setInterval((function(){m+=1,e.setState({time:m})}),1e3)}),t}},{key:"getRandomInt",value:function(e){return Math.floor(Math.random()*Math.floor(e))}},{key:"gameOver",value:function(){for(var e=0;e<this.state.fields.length;e++)for(var t=0;t<this.state.fields[e].length;t++)"X"===this.state.fields[e][t]&&document.getElementById(t+"-"+e).classList.add("revealed-bomb");clearInterval(this.state.interval),this.setState({gameOver:!0,message:"You clicked on a bomb! Be more careful next time.",win:!1}),this.props.gameOver(!1,"You clicked on a bomb! Be more careful next time.")}},{key:"revealNeighbors",value:function(e,t,s){for(var a=e-1;a<parseInt(e)+2;a++)for(var i=t-1;i<parseInt(t)+2;i++){var n=document.getElementById(i+"-"+a);if(n){if(n.classList.contains("revealed"))continue;if(n.classList.contains("marked")){n.classList.remove("marked");var r=this.state.marked-1;this.setState({marked:r})}n.classList.add("bombs"+s[n.id.split("-")[1]][n.id.split("-")[0]]),n.classList.add("revealed"),0===s[a][i]&&this.revealNeighbors(a,i,s)}}}},{key:"componentDidUpdate",value:function(e){e.restart!==this.props.restart&&this.props.restart&&(clearInterval(this.state.interval),this.setState({time:0}),this.renderButtons(),this.setFields(),this.restartClasses(),this.setState({gameOver:!1,marked:0}),this.props.onRestart())}},{key:"handleCompletion",value:function(){clearInterval(this.state.interval);var e=this.state.time;this.setState({gameOver:!0,message:"Congratulations! Completion time: "+e+" sec",win:!0}),this.props.gameOver(!0,"Congratulations! Completion time: "+e+" sec")}},{key:"componentDidMount",value:function(){this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.renderButtons(),this.setFields()}},{key:"handleMouseDown",value:function(e){e.preventDefault(),this.state.gameOver||this.setState({clickedField:e.target.id,mouseClicked:!0})}},{key:"handleMouseMove",value:function(e){this.state.mouseClicked&&this.state.clickedField!==e.target.id&&this.setState({clickedField:""})}},{key:"handleMouseUp",value:function(e){e.preventDefault(),this.setState({mouseClicked:!1}),this.state.clickedField===e.target.id&&(0===e.button?this.handleLeftClick(e.target):2===e.button&&this.handleRightClick(e.target),this.props.sizeX*this.props.sizeY-document.getElementsByClassName("revealed").length===document.getElementsByClassName("marked").length&&this.handleCompletion())}},{key:"handleLeftClick",value:function(e){var t=this.state.fields;if(!e.classList.contains("revealed")&&!e.classList.contains("marked")){if("X"===t[e.id.split("-")[1]][e.id.split("-")[0]]){if(0!==document.getElementsByClassName("revealed").length)return e.classList.add("clicked-bomb"),void this.gameOver();for(var s=!1;!s;)s="X"!==(t=this.setFields())[e.id.split("-")[1]][e.id.split("-")[0]]}e.classList.add("bombs"+t[e.id.split("-")[1]][e.id.split("-")[0]]),e.classList.add("revealed"),0===t[e.id.split("-")[1]][e.id.split("-")[0]]&&this.revealNeighbors(e.id.split("-")[1],e.id.split("-")[0],t)}}},{key:"handleRightClick",value:function(e){if(!e.classList.contains("revealed")&&!e.classList.contains("revealed-bomb"))if(e.classList.contains("marked")){var t=this.state.marked-1;e.classList.remove("marked"),this.setState({marked:t})}else{if(document.getElementsByClassName("marked").length===this.props.bombs)return;t=this.state.marked+1,e.classList.add("marked"),this.setState({marked:t})}}},{key:"render",value:function(){return i.a.createElement("div",{className:this.state.gameOver?"board gameOver":"board",onContextMenu:function(e){return e.preventDefault()},style:{paddingBottom:this.props.sizeX<9?"60px":"35px",width:20*this.props.sizeX+"px",height:20*this.props.sizeY+"px"}},i.a.createElement("div",{className:"marked-i icon",style:{width:"65px",fontSize:"22px",lineHeight:"25px"}},this.props.bombs-this.state.marked<100?this.props.bombs-this.state.marked<10?"00":"0":"",this.props.bombs-this.state.marked)," ",i.a.createElement("div",{className:"time-i icon",style:{display:"inline-block",width:"65px",fontSize:"22px",lineHeight:"25px"}},this.state.time<100?this.state.time<10?"00":"0":"",this.state.time<999?this.state.time:"999"),i.a.createElement("br",null),this.state.buttons)}}]),s}(i.a.Component)),d=function(e){Object(h.a)(s,e);var t=Object(m.a)(s);function s(){var e;Object(l.a)(this,s);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).state={x:20,y:20,bombs:50,gameOver:!1},e}return Object(o.a)(s,[{key:"gameOver",value:function(e,t){this.setState({gameOver:!0,win:e,message:t})}},{key:"newGame",value:function(){var e=document.getElementById("xSize"),t=document.getElementById("ySize");parseInt(e.value)<parseInt(e.min)&&(e.value=Math.ceil(e.min)),parseInt(e.value)>parseInt(e.max)&&(e.value=Math.floor(e.max)),parseInt(t.value)<parseInt(t.min)&&(t.value=Math.ceil(t.min)),parseInt(t.value)>parseInt(t.max)&&(t.value=Math.floor(t.max));var s=document.getElementById("bombCount");s.min=e.value*t.value/20,s.max=e.value*t.value/2,parseInt(s.value)<parseInt(s.min)&&(s.value=Math.ceil(s.min)),parseInt(s.value)>parseInt(s.max)&&(s.value=Math.floor(s.max));var a=parseInt(e.value),i=parseInt(t.value),n=parseInt(s.value);this.setState({x:a,y:i,bombs:n,restart:!0,gameOver:!1})}},{key:"handleRestart",value:function(){this.setState({restart:!1})}},{key:"render",value:function(){var e=this;return this.newGame=this.newGame.bind(this),this.handleRestart=this.handleRestart.bind(this),this.gameOver=this.gameOver.bind(this),i.a.createElement("div",{className:"App"},i.a.createElement(c,{gameOver:this.gameOver,onRestart:this.handleRestart,restart:this.state.restart,sizeX:this.state.x,sizeY:this.state.y,bombs:this.state.bombs}),i.a.createElement("div",{className:"options"},i.a.createElement("label",{htmlFor:"xSize"},"X: "),i.a.createElement("input",{min:5,max:50,step:1,defaultValue:20,id:"xSize",type:"number"}),i.a.createElement("label",{htmlFor:"ySize"},"Y: "),i.a.createElement("input",{min:5,max:30,step:1,defaultValue:20,id:"ySize",type:"number"}),i.a.createElement("label",{htmlFor:"bombCount"},"Bombs: "),i.a.createElement("input",{min:5,max:150,step:1,defaultValue:50,id:"bombCount",type:"number"})),i.a.createElement("div",{className:"newGameDiv"},i.a.createElement("button",{onClick:this.newGame,className:"newGame"},"New game")),i.a.createElement("div",{className:"homePageDiv"},i.a.createElement("button",{className:"homePage",onClick:function(){return window.location.href="http://ammarveljagic.me"}},"Back to home page")),this.state.gameOver?i.a.createElement("div",{onContextMenu:function(e){return e.preventDefault()},className:this.state.win?"winMessage":"gameOverMessage",style:{top:15*-this.state.y-100+"px",width:this.state.x<10?30*this.state.y+"px":20*this.state.x+"px",height:3*this.state.y+40+"px",lineHeight:this.state.y+10+"px",fontSize:this.state.y+10-this.state.y/6+"px",marginBottom:15*-this.state.y/2+30+"px",marginTop:"10px"}},this.state.message,i.a.createElement("br",null),i.a.createElement("p",{onClick:function(t){return e.setState({gameOver:!1})},className:"hide"},"Hide")):"")}}]),s}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(d,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,s){},8:function(e,t,s){e.exports=s(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.724afb0f.chunk.js.map